/*!
 * ZinoUI v1.3 (http://zinoui.com)
 * Copyright 2012-2013 Dimitar Ivanov. All Rights Reserved.
 *
 * Zino UI commercial licenses may be obtained at http://zinoui.com/license
 * If you do not own a commercial license, this file shall be governed by the
 * GNU General Public License (GPL) version 3.
 * For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
 */
(function(c,s){function p(){var b,a;"undefined"!==typeof window.innerWidth?(b=window.innerWidth,a=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(b=document.documentElement.clientWidth,a=document.documentElement.clientHeight):(b=document.body.clientWidth,a=document.body.clientHeight);return{width:parseInt(b,10),height:parseInt(a,10)}}function q(){var b,a;"undefined"!==typeof window.pageYOffset?
(a=window.pageYOffset,b=window.pageXOffset):(a=document.body,b=document.documentElement,b=b.clientHeight?b:a,a=b.scrollTop,b=b.scrollLeft);return{top:parseInt(a,10),left:parseInt(b,10)}}function v(){this.curInst=null;this.data={};this._defaults={width:320,height:240,autoOpen:!1,modal:!1,header:!0,footer:!0,resizable:!1,draggable:!1,maximized:!1,minimized:!1,minWidth:150,minHeight:150,maxWidth:!1,maxHeight:!1,toolbar:{minimize:!0,maximize:!0,close:!0},buttons:{Ok:function(){c(this).zinoOverlay("close")}},
beforeOpen:null,beforeClose:null,open:null,close:null,minimize:null,maximize:null,restore:null,drag:null,dragstart:null,dragend:null,resize:null,resizestart:null,resizeend:null};this.body=document.getElementsByTagName("body")[0];this.html=document.getElementsByTagName("html")[0];this.body&&(this.overflow_body=this.body.style.overflow);this.overflow_html=this.html.style.overflow}v.prototype={_attachOverlay:function(b,a){if(this._getInst(b))return!1;var f=c(b),e=this,d=e._newInst(f),m,t,g,k,l,r,u;p();
q();var h;c.extend(d.settings,e._defaults,a);f.bind("overlayopen",function(a,c){null!==d.settings.open&&d.settings.open.call(b,a,c)}).bind("overlayclose",function(a,c){null!==d.settings.close&&d.settings.close.call(b,a,c)}).bind("overlayminimize",function(a,c){null!==d.settings.minimize&&d.settings.minimize.call(b,a,c)}).bind("overlaymaximize",function(a,c){null!==d.settings.maximize&&d.settings.maximize.call(b,a,c)}).bind("overlayrestore",function(a,c){null!==d.settings.restore&&d.settings.restore.call(b,
a,c)}).bind("overlaydrag",function(a,c){null!==d.settings.drag&&d.settings.drag.call(b,a,c)}).bind("overlaydragstart",function(a,c){null!==d.settings.dragstart&&d.settings.dragstart.call(b,a,c)}).bind("overlaydragend",function(a,c){null!==d.settings.dragend&&d.settings.dragend.call(b,a,c)}).bind("overlayresize",function(a,c){null!==d.settings.resize&&d.settings.resize.call(b,a,c)}).bind("overlayresizestart",function(a,c){null!==d.settings.resizestart&&d.settings.resizestart.call(b,a,c)}).bind("overlayresizeend",
function(a,c){null!==d.settings.resizeend&&d.settings.resizeend.call(b,a,c)});m=c("<div>").attr({id:["zui-overlay-container-",d.uid].join("")}).addClass("zui-overlay-container");t=c("<div>").attr({id:["zui-overlay-wrapper-",d.uid].join("")}).addClass("zui-overlay-wrapper");g=c("<div>").attr({id:["zui-overlay-holder-",d.uid].join(""),role:"dialog"}).addClass("zui-overlay-holder");k=c("<div>").attr({id:["zui-overlay-header-",d.uid].join("")}).addClass("zui-overlay-header zui-unselectable");c("<div>").addClass("zui-overlay-header-title").html(f.attr("title")).appendTo(k);
l=c("<div>").addClass("zui-overlay-header-toolbar");r=c("<div>").attr({id:["zui-overlay-content-",d.uid].join("")}).addClass("zui-overlay-content").html(f.html());u=c("<div>").attr({id:["zui-overlay-footer-",d.uid].join("")}).addClass("zui-overlay-footer").append(c("<div>").addClass("zui-overlay-footer-inner"));for(var n in d.settings.buttons)d.settings.buttons.hasOwnProperty(n)&&(h=c("<input>").attr({type:"button"}).val(n).click(function(a,b){return function(c){d.settings.buttons[a].apply(b,[this])}}(n,
b)).appendTo(u.find(".zui-overlay-footer-inner")),c.fn.zinoButton!==s&&h.zinoButton());d.settings.toolbar.minimize&&(h=c("<span>").addClass("zui-overlay-toolbar-icon zui-overlay-minimize"),n=c("<span>").addClass("zui-overlay-toolbar-icon zui-overlay-restore"),c("<a>").addClass("zui-overlay-toolbar-link").attr({href:"#"}).click(function(a){a&&a.preventDefault&&a.preventDefault();e._minimizeOverlay.call(e,b,this);return!1}).append(h).appendTo(l),c("<a>").addClass("zui-overlay-toolbar-link").attr({href:"#"}).hide().click(function(a){a&&
a.preventDefault&&a.preventDefault();e._restoreOverlay.call(e,b,this);return!1}).append(n).appendTo(l));d.settings.toolbar.maximize&&(h=c("<span>").addClass("zui-overlay-toolbar-icon zui-overlay-maximize"),c("<a>").attr({href:"#"}).addClass("zui-overlay-toolbar-link").click(function(a){a&&a.preventDefault&&a.preventDefault();e._maximizeOverlay.call(e,b,this);return!1}).append(h).appendTo(l));d.settings.toolbar.close&&(h=c("<span>").addClass("zui-overlay-toolbar-icon zui-overlay-close"),c("<a>").addClass("zui-overlay-toolbar-link").attr({href:"#"}).click(function(a){a&&
a.preventDefault&&a.preventDefault();e._closeOverlay.call(e,b,this);return!1}).append(h).appendTo(l));l.appendTo(k);k.dblclick(function(a){d.settings.maximized?e._restoreOverlay.call(e,b,this):e._maximizeOverlay.call(e,b,this)});g.css({width:d.settings.width+"px",height:d.settings.height+"px"});d.settings.draggable||d.settings.resizable||(g.css({webkitTransitionProperty:"top, left",webkitTransitionDuration:"1000ms"}),c(window).bind("resize.overlay",function(){e._onWindowResize.call(e,b)}).bind("scroll.overlay",
function(){e._onWindowResize.call(e,b)}));d.settings.header?k.appendTo(g):r.css("top",0);r.appendTo(g);d.settings.footer?u.appendTo(g):r.css("bottom",0);t.appendTo(m);g.appendTo(m);m.appendTo(document.body);if(d.settings.draggable)if(c.fn.zinoDraggable!==s)g.zinoDraggable({handle:k,lowerBound:null,upperBound:null,start:function(a,b){f.trigger("overlaydragstart",{event:a,ui:b})},drag:function(a,b){f.trigger("overlaydrag",{event:a,ui:b})},end:function(a,b){f.trigger("overlaydragend",{event:a,ui:b})},
attachLater:!1}),k.css({cursor:"move"});else throw Error("zinoDraggable is missing.");c(document).bind("keydown.overlay",function(a){27===(a.charCode?a.charCode:a.keyCode?a.keyCode:0)&&e.curInst&&e.curInst._closeOverlay.call(e,b)});d.$wrapper=t;d.$holder=g;d.$container=m;c.data(b,"overlay",d);d.settings.autoOpen&&e._openOverlay.call(e,b);if(d.settings.resizable)if(c.fn.zinoResizable!==s)g.zinoResizable({resize:function(){f.trigger("overlayresize",{})},start:function(){f.trigger("overlayresizestart",
{})},end:function(){f.trigger("overlayresizeend",{})},maxWidth:d.settings.maxWidth,maxHeight:d.settings.maxHeight,minWidth:d.settings.minWidth,minHeight:d.settings.minHeight});else throw Error("zinoResizable is missing.");},_setPosition:function(b){b=this._getInst(b);if(!b)return!1;var a=q(),f=p();c("#zui-overlay-holder-"+b.uid).css({top:[a.top+(f.height-b.settings.height)/2,"px"].join(""),left:[a.left+(f.width-b.settings.width)/2,"px"].join("")})},_setSize:function(b){b=this._getInst(b);if(!b)return!1;
var a=q(),f=p();c("#zui-overlay-container-"+b.uid).css({height:[a.top+f.height,"px"].join(""),width:[a.left+f.width,"px"].join("")});c("#zui-overlay-wrapper-"+b.uid).css({height:[Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight)),"px"].join(""),width:[Math.max(Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),
Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),Math.max(document.body.clientWidth,document.documentElement.clientWidth)),"px"].join("")})},_onWindowResize:function(b){var a=this._getInst(b);if(!a)return!1;a.isOpen&&(this._setPosition(b),this._setSize(b))},_showResizableHandles:function(b){b=this._getInst(b);if(!b)return!1;c(".zui-resizable-handle",b.$container).show()},_hideResizableHandles:function(b){b=this._getInst(b);if(!b)return!1;c(".zui-resizable-handle",b.$container).hide()},
_openOverlay:function(b){var a=this._getInst(b);if(!a)return!1;c(b);this.curInst=this;if(null!==a.settings.beforeOpen&&!1===a.settings.beforeOpen.call(b,a))return this;this._setSize(b);this._setPosition(b);c("#zui-overlay-wrapper-"+a.uid).css({display:a.settings.modal?"block":"none"});c("#zui-overlay-container-"+a.uid).show();c(b).trigger("overlayopen",{});a.isOpen=!0;c.data(b,"overlay",a)},_closeOverlay:function(b){var a=this._getInst(b);if(!a)return!1;if(null!==a.settings.beforeClose&&!1===a.settings.beforeClose.call(b,
a))return this;c("#zui-overlay-container-"+a.uid).hide();c(b).trigger("overlayclose",{});this.body&&(this.body.style.overflow=this.overflow_body);this.html&&(this.html.style.overflow=this.overflow_html);this.curInst=null;a.isOpen=!1;c.data(b,"overlay",a)},_minimizeOverlay:function(b){var a=this._getInst(b);if(!a)return!1;if(a.isOpen){var f=document.getElementById("zui-overlay-header-"+a.uid),e=f.offsetHeight;a.settings.maximized||(this.last_width=a.settings.width,this.last_height=a.settings.height);
a.settings.resizable&&this._hideResizableHandles.call(this,b);this.body&&(this.body.style.overflow=this.overflow_body);this.html&&(this.html.style.overflow=this.overflow_html);c("#zui-overlay-content-"+a.uid).hide();a.settings.footer&&c("#zui-overlay-footer-"+a.uid).hide();c(".zui-overlay-minimize",f).parent().hide();c(".zui-overlay-maximize",f).parent().show();c(".zui-overlay-restore",f).parent().show();c("#zui-overlay-holder-"+a.uid).css({height:e+"px"});a.settings.maximized=!1;a.settings.minimized=
!0;c(b).trigger("overlayminimize",{});c.data(b,"overlay",a)}},_maximizeOverlay:function(b){var a=this._getInst(b);if(!a)return!1;if(a.isOpen){var f=p(),e=q(),d=document.getElementById("zui-overlay-header-"+a.uid);a.settings.minimized||(this.last_width=a.settings.width,this.last_height=a.settings.height);a.settings.width=f.width;a.settings.height=f.height;c("#zui-overlay-holder-"+a.uid).css({height:f.height+"px",width:f.width+"px"});a.settings.maximized=!0;a.settings.minimized=!1;c(".zui-overlay-minimize",
d).parent().show();c(".zui-overlay-maximize",d).parent().hide();c(".zui-overlay-restore",d).parent().show();a.settings.resizable&&this._hideResizableHandles(this,b);this.body&&(this.body.style.overflow="hidden");this.html&&(this.html.style.overflow="hidden");c("#zui-overlay-content-"+a.uid).show();a.settings.footer&&c("#zui-overlay-footer-"+a.uid).show();c("#zui-overlay-holder-"+a.uid).css({top:e.top+"px",left:e.left+"px"});c(b).trigger("overlaymaximize",{});c.data(b,"overlay",a)}},_restoreOverlay:function(b){var a=
this._getInst(b);if(!a)return!1;if(a.isOpen){var f=this.last_width,e=this.last_height,d=document.getElementById("zui-overlay-header-"+a.uid);a.settings.minimized?a.settings.minimized=!1:a.settings.maximized?a.settings.maximized=!1:(this.last_width=a.settings.width,this.last_height=a.settings.height);a.settings.resizable&&this._showResizableHandles.call(this,b);a.settings.width=f;a.settings.height=e;this.body&&(this.body.style.overflow=this.overflow_body);this.html&&(this.html.style.overflow=this.overflow_html);
c("#zui-overlay-holder-"+a.uid).css({width:f+"px",height:e+"px"});c("#zui-overlay-content-"+a.uid).show();a.settings.footer&&c("#zui-overlay-footer-"+a.uid).show();c(".zui-overlay-minimize",d).parent().show();c(".zui-overlay-maximize",d).parent().show();c(".zui-overlay-restore",d).parent().hide();this._setPosition(b);c(b).trigger("overlayrestore",{});c.data(b,"overlay",a)}},_newInst:function(b){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,uid:Math.floor(999999*Math.random()),isDisabled:!1,
isOpen:!1,settings:{}}},_getInst:function(b){try{return c.data(b,"overlay")}catch(a){throw"Missing instance data for this overlay";}}};c.fn.zinoOverlay=function(b){var a=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&"isDisabled"==b||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?c.zinoOverlay["_"+b+"Overlay"].apply(c.zinoOverlay,[this[0]].concat(a)):this.each(function(){"string"==typeof b?c.zinoOverlay["_"+b+"Overlay"].apply(c.zinoOverlay,[this].concat(a)):c.zinoOverlay._attachOverlay(this,
b)})};c.zinoOverlay=new v;c.zinoOverlay.version="1.3"})(jQuery);