/*!
 * ZinoUI v1.3 (http://zinoui.com)
 * Copyright 2012-2013 Dimitar Ivanov. All Rights Reserved.
 *
 * Zino UI commercial licenses may be obtained at http://zinoui.com/license
 * If you do not own a commercial license, this file shall be governed by the
 * GNU General Public License (GPL) version 3.
 * For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
 */
(function(n,t){function q(){this._defaults={type:"line",legend:!0,tooltip:!0,series:[],lineRowColor:"#ccc",axisColor:"#444",textColor:"#444",fontSize:"12px",fontFamily:"Arial",radius:75,innerRadius:50};this.points=[];this.over=!1}q.getWebsafeColors=function(){var b,a,c,e=[],d="00 33 66 99 CC FF".split(" ");for(b=0;6>b;b++)for(a=0;6>a;a++)for(c=0;6>c;c++)e.push(["#",d[b],d[a],d[c]].join(""));return e};q.getColors=function(b){var a="#3366CC #DC3912 #067A06 #FFCC00 #663300 #660066 #3399CC #CC6600 #CC3399 #CC6666 #339900 #CC99FF #CC3300 #99FF66 #993366 #16448A".split(" ");
return b!==t&&a[b]!==t?a[b]:a};q.prototype={_attachChart:function(b,a){if(this._getInst(b))return!1;var c=n(b),e=this,d=this._newInst(c);n.extend(d.settings,this._defaults,a);d.settings.paddingTop=Math.floor(10*d.settings.height/100);d.settings.paddingBottom=Math.floor(10*d.settings.height/100);d.settings.paddingLeft=Math.floor(10*d.settings.width/100);d.settings.paddingRight=d.settings.legend?Math.floor(20*d.settings.width/100):0;d.settings.canvasWidth=d.settings.width-d.settings.paddingLeft-(-1===
n.inArray(d.settings.type,["candlestick","spline","scatter","bubble"])?d.settings.paddingRight:0);d.settings.canvasHeight=d.settings.height-d.settings.paddingTop-d.settings.paddingBottom;d.settings.blockNum=d.settings.series.length-("candlestick"!==d.settings.type?1:0);d.settings.blockWidth=Math.floor(d.settings.canvasWidth/d.settings.blockNum);d.settings.blockHeight=Math.floor(d.settings.canvasHeight/d.settings.blockNum);d.handle=zino.Svg({target:b,width:d.settings.width,height:d.settings.height});
d.settings.tooltip&&c.bind("mousemove.chart",function(a){var b,g,k;g=a.pageX-this.offsetLeft;k=a.pageY-this.offsetTop;a=0;for(b=e.points.length;a<b;a++)if(g>=e.points[a].x-3&&g<=e.points[a].x+3&&k>=e.points[a].y-3&&k<=e.points[a].y+3){var l=d.handle.g().attr({"class":"zui-chart-tooltip"}).getShape();d.handle.circle(e.points[a].x,e.points[a].y,e.points[a].radius+1,!1).attr({fill:e.points[a].color}).appendTo(l);!1===e.over&&(g=e.points[a].x-50,b=e.points[a].y-50-10-5,k=["M",g+0,",",b,"L",g+100-0,",",
b,"L",g+100,",",b+50-0,"L",g+100-45,",",b+50,"L",g+50,",",b+50+10,"L",g+45,",",b+50,"L",g+0,",",b+50,"L",g,",",b+0,"Z"],d.handle.path(k.join("")).attr({fill:"#FFFFFF",stroke:"#A5A5A5","stroke-width":1}).appendTo(l),d.handle.text(g+5,b+8,e.points[a].name).attr({fill:"#000","font-family":d.settings.fontFamily,"font-size":d.settings.fontSize,"font-weight":"bold","text-anchor":"start","alignment-baseline":"baseline","class":"zui-chart-text"}).appendTo(l),d.handle.text(g+5,b+28,e.points[a].data).attr({fill:"#000",
"font-family":d.settings.fontFamily,"font-size":d.settings.fontSize,"text-anchor":"start","alignment-baseline":"baseline"}).appendTo(l));e.over=!0;break}else!0===e.over&&(e.over=!1,c.find("g.zui-chart-tooltip").remove())});n.data(b,"chart",d);this.draw.call(this,b)},draw:function(b){var a=this._getInst(b);if(!a)return!1;a.handle.rect(0,0,0,0,a.settings.width,a.settings.height).attr({fill:"#FFFFFF",stroke:"none","stroke-width":0}).insert();switch(a.settings.type){case "pie":this.pie.call(this,b);break;
case "donut":this.donut.call(this,b);break;case "bar":this.bar.call(this,b);break;case "column":this.column.call(this,b);break;case "line":this.line.call(this,b);break;case "area":this.area.call(this,b);break;case "radar":this.radar.call(this,b);break;case "candlestick":this.candlestick.call(this,b);break;case "spline":this.spline.call(this,b);break;case "scatter":this.scatter.call(this,b);break;case "bubble":this.bubble.call(this,b)}},_hideLabelsChart:function(b){if(!this._getInst(b))return!1;n(b).find(".zui-chart-labels").remove()},
_showLabelsChart:function(b){b=this._getInst(b);if(!b)return!1;var a,c,e,d=0,f=0,h=Math.floor((b.settings.width-b.settings.paddingRight)/2),g=Math.floor(b.settings.height/2),k=b.handle.g().attr({"class":"zui-chart-labels"}).getShape();a=1;for(c=b.settings.series.length;a<c;a++)f+=b.settings.series[a][1];a=1;for(c=b.settings.series.length;a<c;a++)e=360*(b.settings.series[a][1]/f)+d,b.handle.text(h+(b.settings.radius+20)*Math.cos(-(d+e)/2*Math.PI/180),g+(b.settings.radius+20)*Math.sin(-(d+e)/2*Math.PI/
180),b.settings.series[a][1],!1).attr({fill:b.settings.textColor,"font-family":b.settings.fontFamily,"font-size":b.settings.fontSize,"text-anchor":"middle"}).appendTo(k),d=e},_hideLegendChart:function(b){if(!this._getInst(b))return!1;n(b).find(".zui-chart-legend").remove()},_showLegendChart:function(b){b=this._getInst(b);if(!b)return!1;var a,c,e,d=q.getColors(),f=b.handle.g().attr({"class":"zui-chart-legend"}).getShape();switch(b.settings.type){case "line":case "area":case "bar":case "column":case "radar":c=
b.settings.series[0].length;e=1;break;case "pie":case "donut":c=b.settings.series.length,e=2}for(a=1;a<c;a++)b.handle.rect(b.settings.width-b.settings.paddingRight+10,b.settings.paddingTop+15*(a-1),0,0,12,12,!1).attr({fill:d[a-1],stroke:"none","stroke-width":0}).appendTo(f),b.handle.text(b.settings.width-b.settings.paddingRight+25,b.settings.paddingTop+15*(a-1),1===e?b.settings.series[0][a]:b.settings.series[a][0],!1).attr({"alignment-baseline":"baseline","font-family":b.settings.fontFamily,"font-size":b.settings.fontSize,
"text-anchor":"start"}).appendTo(f)},pie:function(b){var a=this._getInst(b);if(!a)return!1;var c,e,d,f,h=0,g=0,k=a.handle.g().attr({"class":"zui-chart-canvas"}).getShape(),l=Math.floor((a.settings.width-a.settings.paddingRight)/2),m=Math.floor(a.settings.height/2),p=q.getColors();c=1;for(e=a.settings.series.length;c<e;c++)g+=a.settings.series[c][1];c=1;for(e=a.settings.series.length;c<e;c++)f=Math.floor(999999*Math.random()),d=360*(a.settings.series[c][1]/g)+h,a.handle.sector(l,m,a.settings.radius,
h.toFixed(2),d.toFixed(2),!1).attr({fill:p[c-1],stroke:"#FFFFFF","stroke-width":1,"data-rel":"sector_"+f}).bind("click",function(b,c,d,e){return function(f){f=n(f);f=f.siblings("path[data-rel='arc_"+f.attr("data-rel").split("_")[1]+"']");0===f.length?a.handle.arc(l,m,a.settings.radius+3,b,c,!1).attr({fill:"none",stroke:d,"stroke-opacity":1,"stroke-width":3,"data-rel":"arc_"+e}).appendTo(k):f.remove()}}(h.toFixed(2),d.toFixed(2),p[c-1],f)).appendTo(k),h=d;this._showLabelsChart.call(this,b);a.settings.legend&&
this._showLegendChart.call(this,b)},radar:function(b){var a=this._getInst(b);if(!a)return!1;var c,e,d,f,h,g,k=[],l=[],m=Math.floor((a.settings.width-a.settings.paddingRight)/2),p=Math.floor(a.settings.height/2),n=this.getBounds(b),s=360/(a.settings.series.length-1),u=a.settings.radius/5,v=q.getColors(),w=a.handle.g().attr({"class":"zui-chart-lines"}).getShape(),x=a.handle.g().attr({"class":"zui-chart-grid"}).getShape(),y=a.handle.g().attr({"class":"zui-chart-area"}).getShape(),z=a.handle.g().attr({"class":"zui-chart-labels"}).getShape(),
A=a.handle.g().attr({"class":"zui-chart-scale"}).getShape();c=1;for(e=a.settings.series.length;c<e;c++)for(h=m+a.settings.radius*Math.cos((-90+s*(c-1))*Math.PI/180),g=p+a.settings.radius*Math.sin((-90+s*(c-1))*Math.PI/180),a.handle.line(m,p,h,g,!1).attr({fill:"none",stroke:a.settings.lineRowColor,"stroke-width":1}).appendTo(w),h=m+(a.settings.radius+20)*Math.cos((-90+s*(c-1))*Math.PI/180),g=p+(a.settings.radius+20)*Math.sin((-90+s*(c-1))*Math.PI/180),a.handle.text(h,g,a.settings.series[c][0],!1).attr({"alignment-baseline":"middle",
fill:a.settings.textColor,"font-size":a.settings.fontSize,"font-family":a.settings.fontFamily,"text-anchor":"middle"}).appendTo(z),d=1,f=a.settings.series[c].length;d<f;d++)g=a.settings.series[c][d]/n.yMax*a.settings.radius,h=m+g*Math.cos((-90+s*(c-1))*Math.PI/180),g=p+g*Math.sin((-90+s*(c-1))*Math.PI/180),l[d]===t&&(l[d]=[]),1<c?l[d].push(["L",h,",",g].join("")):l[d].push(["M",h,",",g].join(""));d=0;for(f=5;d<f;d++){k[d]=[];c=1;for(e=a.settings.series.length;c<e;c++)h=m+(a.settings.radius-u*d)*Math.cos((-90+
s*(c-1))*Math.PI/180),g=p+(a.settings.radius-u*d)*Math.sin((-90+s*(c-1))*Math.PI/180),1<c?k[d].push(["L",h,",",g].join("")):(k[d].push(["M",h,",",g].join("")),a.handle.text(h-5,g,(n.yMax-n.yMax/5*d).toFixed(2),!1).attr({"alignment-baseline":"central",fill:a.settings.textColor,"font-size":a.settings.fontSize,"font-family":a.settings.fontFamily,"text-anchor":"end"}).appendTo(A));k[d].push("Z");a.handle.path(k[d].join(""),!1).attr({fill:"none",stroke:a.settings.lineRowColor,"stroke-width":1}).appendTo(x)}d=
1;for(f=l.length;d<f;d++)l[d].push("Z"),a.handle.path(l[d].join(""),!1).attr({fill:v[d-1],"fill-opacity":0.4,stroke:v[d-1],"stroke-width":1}).appendTo(y);a.settings.legend&&this._showLegendChart.call(this,b)},donut:function(b){var a=this._getInst(b);if(!a)return!1;var c,e,d,f,h=0,g=0,k=a.handle.g().attr({"class":"zui-chart-canvas"}).getShape(),l=Math.floor((a.settings.width-a.settings.paddingRight)/2),m=Math.floor(a.settings.height/2),p=q.getColors();c=1;for(e=a.settings.series.length;c<e;c++)g+=
a.settings.series[c][1];c=1;for(e=a.settings.series.length;c<e;c++)f=Math.floor(999999*Math.random()),d=360*(a.settings.series[c][1]/g)+h,a.handle.sector(l,m,a.settings.radius,h.toFixed(2),d.toFixed(2),!1).attr({fill:p[c-1],stroke:"#FFFFFF","stroke-width":1,"data-rel":"sector_"+f}).bind("click",function(b,c,d,e){return function(f){f=n(f);f=f.siblings("path[data-rel='arc_"+f.attr("data-rel").split("_")[1]+"']");0===f.length?a.handle.arc(l,m,a.settings.radius+3,b,c,!1).attr({fill:"none",stroke:d,"stroke-opacity":1,
"stroke-width":3,"data-rel":"arc_"+e}).appendTo(k):f.remove()}}(h.toFixed(2),d.toFixed(2),p[c-1],f)).appendTo(k),h=d;this._showLabelsChart.call(this,b);a.handle.circle(l,m,0,!1).attr({fill:"#FFFFFF"}).animate({attributeName:"r",fill:"freeze",to:a.settings.innerRadius,dur:"1s",repeatCount:1}).appendTo(k);a.settings.legend&&this._showLegendChart.call(this,b)},_lineArea:function(b){var a=this._getInst(b);if(!a)return!1;this.setPlot.call(this,b);a.settings.legend&&this._showLegendChart.call(this,b);var c,
e,d,f,h,g,k,l,m,n,r=q.getColors(),s=a.handle.g().attr({"class":"zui-chart-canvas"}).getShape();"area"===a.settings.type&&(n=a.handle.g().attr({"class":"zui-chart-plot"}).getShape());c=1;for(e=a.settings.series[0].length;c<e;c++){h=a.settings.paddingLeft+a.settings.blockWidth/2;k=[];l=[];d=1;for(f=a.settings.series.length;d<f;d++)g=a.settings.paddingLeft+a.settings.blockWidth*(d-1)+a.settings.blockWidth/2,m=this.getY(b,a.settings.series[d][c]),1===d?(k.push("M"+h+","+m),l.push("M"+h+","+m)):(k.push("L"+
g+","+m),l.push("L"+g+","+m)),this.points.push({x:g,y:m,radius:3,color:r[c-1],name:a.settings.series[0][c],data:a.settings.series[d][c]});"area"===a.settings.type&&(l.push("L"+g+","+(a.settings.height-a.settings.paddingBottom)),l.push("L"+h+","+(a.settings.height-a.settings.paddingBottom)),l.push("Z"),a.handle.path(l.join(""),!1).attr({fill:r[c-1],"fill-opacity":0.3,stroke:"none","stroke-width":0}).appendTo(n));a.handle.path(k.join(""),!1).attr({fill:"none","fill-opacity":1,stroke:r[c-1],"stroke-width":2}).appendTo(s)}},
line:function(b){this._lineArea.call(this,b)},area:function(b){this._lineArea.call(this,b)},bar:function(b){var a=this._getInst(b);if(!a)return!1;this.setPlot.call(this,b);a.settings.legend&&this._showLegendChart.call(this,b);var c,e,d,f,h=this.getX(b,0),g=this.getBounds(b).yMax,k=a.handle.g().attr({"class":"zui-chart-canvas"}).getShape(),l=q.getColors();b=1;for(c=a.settings.series.length;b<c;b++)for(e=1,d=a.settings.series[b].length;e<d;e++)f=a.settings.series[b][e]/g*a.settings.canvasWidth,a.handle.rect(h,
a.settings.paddingTop+10*(e-1)+10*(b-1)*d,0,0,f.toFixed(2),8,!1).attr({fill:l[e-1]}).appendTo(k)},bubble:function(b){var a=this._getInst(b);if(!a)return!1;this.setGrid.call(this,b);this.setAxis.call(this,b);var c,e,d,f,h,g,k,l=q.getColors();d=this.getBounds(b);var m={fill:a.settings.textColor,"font-family":a.settings.fontFamily,"font-size":a.settings.fontSize,"text-anchor":"middle"},n=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-y"}).getShape(),r=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-x"}).getShape(),
s=a.handle.g().attr({"class":"zui-chart-circles"}).getShape();a.settings.series.sort(function(a,b){return!isNaN(parseFloat(a[1]))&&isFinite(a[1])?a[1]<b[1]?-1:a[1]>b[1]?1:0:-1});c=1;for(e=a.settings.series.length;c<e;c++)a.handle.text(a.settings.paddingLeft+a.settings.blockWidth*(c-1)+a.settings.blockWidth/2,a.settings.height-a.settings.paddingBottom+20,a.settings.series[c][1],!1).attr(m).appendTo(r);for(c=0;c<=d.yMax;c+=Math.ceil(d.yMax/4))a.handle.text(a.settings.paddingLeft-20,this.getY(b,c),c,
!1).attr(m).attr({"alignment-baseline":"middle"}).appendTo(n);c=1;for(e=a.settings.series.length;c<e;c++)1<c?(g=a.settings.series[c][1]>g?a.settings.series[c][1]:g,k=a.settings.series[c][2]>k?a.settings.series[c][2]:k):(g=a.settings.series[c][1],k=a.settings.series[c][2]),a.settings.series[c][4]!==t&&(f=1<c?a.settings.series[c][4]>f?a.settings.series[c][4]:f:a.settings.series[c][4]);c=1;for(e=a.settings.series.length;c<e;c++)b=a.settings.paddingLeft+a.settings.series[c][1]/g*a.settings.canvasWidth,
d=a.settings.paddingTop+a.settings.canvasHeight-a.settings.series[c][2]/k*a.settings.canvasHeight,a.settings.series[c][4]!==t&&(h=20*(a.settings.series[c][4]/f)),a.handle.circle(b,d,h,!1).attr({fill:l[c-1],"fill-opacity":1,stroke:"none","stroke-width":0}).appendTo(s)},candlestick:function(b){var a=this._getInst(b);if(!a)return!1;this.setPlot.call(this,b);var c,e,d,f,h,g,k,l,m=0.55*a.settings.blockWidth,p=q.getColors(),r=this.getBounds(b);k=a.handle.g().attr({"class":"zui-chart-lines"}).getShape();
l=a.handle.g().attr({"class":"zui-chart-rects"}).getShape();b=0;for(c=a.settings.series.length;b<c;b++)e=a.settings.series[b][2]<a.settings.series[b][3],d=f=a.settings.paddingLeft+b*a.settings.blockWidth+a.settings.blockWidth/2,h=a.settings.height-a.settings.paddingBottom-a.settings.canvasHeight*(a.settings.series[b][1]/r.yMax),g=a.settings.height-a.settings.paddingBottom-a.settings.canvasHeight*(a.settings.series[b][2]/r.yMax),h>g&&a.handle.line(d,h,f,g,!1).attr({"shape-rendering":"crispEdges",stroke:a.settings.series[b][5]||
p[0],"stroke-width":2}).appendTo(k),d=f=a.settings.paddingLeft+b*a.settings.blockWidth+a.settings.blockWidth/2,h=a.settings.height-a.settings.paddingBottom-a.settings.canvasHeight*(a.settings.series[b][3]/r.yMax),g=a.settings.height-a.settings.paddingBottom-a.settings.canvasHeight*(a.settings.series[b][4]/r.yMax),h>g&&a.handle.line(d,h,f,g,!1).attr({"shape-rendering":"crispEdges",stroke:a.settings.series[b][5]||p[0],"stroke-width":2}).appendTo(k),g=Math.floor(99999*Math.random()),d=a.settings.paddingLeft+
b*a.settings.blockWidth+(a.settings.blockWidth-m)/2,f=e?a.settings.height-a.settings.paddingBottom-a.settings.canvasHeight*(a.settings.series[b][3]/r.yMax):a.settings.height-a.settings.paddingBottom-a.settings.canvasHeight*(a.settings.series[b][2]/r.yMax),h=a.settings.canvasHeight*(Math.abs(a.settings.series[b][2]-a.settings.series[b][3])/r.yMax),a.handle.rect(d,f,0,0,m,h,!1).attr({fill:e?a.settings.series[b][5]||p[0]:"#FFFFFF","shape-rendering":"crispEdges",stroke:a.settings.series[b][5]||p[0],"stroke-width":2,
"data-rel":"rect_"+g}).bind("click",function(b,c,d,e,f,g,h){return function(k){var m=null;k=n(k).siblings("rect[data-rel^='inner_']");var p=k.length;0<p&&(m=k.attr("data-rel").split("_")[1],k.remove());0!==p&&f==m||a.handle.rect(b+(h?1:2),c+(h?1:2),0,0,d-(h?2:4),e-(h?2:4),!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:g,"stroke-width":1,"data-rel":"inner_"+f}).appendTo(l)}}(d,f,m,h,g,e?"#FFFFFF":a.settings.series[b][5]||p[0],e)).appendTo(l)},column:function(b){var a=this._getInst(b);
if(!a)return!1;this.setPlot.call(this,b);a.settings.legend&&this._showLegendChart.call(this,b);var c,e,d,f,h=this.getBounds(b).yMax,g=a.handle.g().attr({"class":"zui-chart-canvas"}).getShape(),k=q.getColors();b=1;for(c=a.settings.series.length;b<c;b++)for(e=1,d=a.settings.series[b].length;e<d;e++)f=(a.settings.series[b][e]/h*a.settings.canvasHeight).toFixed(2),a.handle.rect(a.settings.paddingLeft+12*(e-1)+(b-1)*a.settings.blockWidth,(a.settings.height-a.settings.paddingTop-f).toFixed(2),0,0,10,f,
!1).attr({fill:k[e-1]}).appendTo(g)},getX:function(b,a){var c=this._getInst(b);return c?(c.settings.canvasWidth/this.getBounds(b).yMax*a+c.settings.paddingLeft).toFixed(2):!1},getY:function(b,a){var c=this._getInst(b);return c?(c.settings.height-c.settings.canvasHeight/this.getBounds(b).yMax*a-c.settings.paddingBottom).toFixed(2):!1},getBounds:function(b){b=this._getInst(b);if(!b)return!1;var a,c,e,d,f="candlestick"!==b.settings.type?1:0,h=null,g=null,k=null,l=null;d=f;for(a=b.settings.series.length;f<
a;f++)for(c=1,e=b.settings.series[f].length;c<e;c++)f===d&&1===c?(k=b.settings.series[f][c],l=b.settings.series[f][c]):(k=b.settings.series[f][c]>k?b.settings.series[f][c]:k,l=b.settings.series[f][c]<l?b.settings.series[f][c]:l);f=1;for(a=b.settings.series.length;f<a;f++)1===f?(h=b.settings.series[f][0],g=b.settings.series[f][0]):(h=b.settings.series[f][0]>h?b.settings.series[f][0]:h,g=b.settings.series[f][0]<g?b.settings.series[f][0]:g);return{xMin:g,xMax:h,yMin:l,yMax:k}},setPlot:function(b){if(!this._getInst(b))return!1;
this.setGrid(b);this.setLabels(b);this.setAxis(b)},setGrid:function(b){var a=this._getInst(b);if(!a)return!1;var c,e,d,f,h=this.getBounds(b),g=a.handle.g().attr({"class":"zui-chart-grid"}).getShape();switch(a.settings.type){case "area":case "line":case "spline":case "column":case "candlestick":case "scatter":case "bubble":c=1;"candlestick"===a.settings.type&&(c=0);for(e=a.settings.series.length;c<=e;c++)d="candlestick"!==a.settings.type?c-1:c,d=a.settings.paddingLeft+a.settings.blockWidth*d,f=a.settings.height-
a.settings.paddingBottom,a.handle.line(d,a.settings.paddingTop,d,f,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(g),a.handle.line(d,f+1,d,f+5,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.axisColor,"stroke-width":1}).appendTo(g);c=0;for(e=h.yMax;c<=e;c+=Math.ceil(e/4))f=this.getY(b,c),a.handle.line(a.settings.paddingLeft,f,a.settings.paddingLeft+a.settings.canvasWidth,f,!1).attr({fill:"none",
"shape-rendering":"crispEdges",stroke:a.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(g),a.handle.line(a.settings.paddingLeft-4,f,a.settings.paddingLeft,f,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.axisColor,"stroke-width":1}).appendTo(g);break;case "bar":c=0;for(e=h.yMax;c<=e;c+=Math.ceil(e/a.settings.blockNum))d=this.getX(b,c),f=a.settings.height-a.settings.paddingBottom,a.handle.rect(d,f,0,0,1,4,!1).attr({fill:a.settings.axisColor,"shape-rendering":"crispEdges",
stroke:"none","stroke-width":0}).appendTo(g);c=0;d=1;for(e=h.yMax;d<=a.settings.blockNum;d++,c+=Math.ceil(e/a.settings.blockNum))f=this.getY(b,c),a.handle.line(a.settings.paddingLeft,f,a.settings.paddingLeft+a.settings.canvasWidth,f,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(g),a.handle.rect(a.settings.paddingLeft-4,this.getY(b,c),0,0,4,1,!1).attr({fill:a.settings.axisColor,"shape-rendering":"crispEdges",
stroke:"none","stroke-width":0}).appendTo(g);c=0;for(e=h.yMax;c<=e;c+=Math.ceil(e/a.settings.blockNum))d=this.getX(b,c),a.handle.line(d,a.settings.paddingTop,d,a.settings.paddingTop+a.settings.canvasHeight,!1).attr({fill:"none","shape-rendering":"crispEdges","stroke-dasharray":"5,2",stroke:a.settings.lineRowColor,"stroke-width":1}).appendTo(g)}},setLabels:function(b){var a=this._getInst(b);if(!a)return!1;var c,e,d,f,h,g=this.getBounds(b),k={fill:a.settings.textColor,"font-family":a.settings.fontFamily,
"font-size":a.settings.fontSize,"text-anchor":"middle"},l=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-y"}).getShape(),m=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-x"}).getShape();switch(a.settings.type){case "area":case "line":case "spline":case "column":case "candlestick":case "scatter":case "bubble":"column"===a.settings.type&&(k["text-anchor"]="start");c=1;"candlestick"===a.settings.type&&(c=0);for(e=a.settings.series.length;c<=e;c++)d="candlestick"!==a.settings.type?
c-1:c,d=a.settings.paddingLeft+a.settings.blockWidth*d,h=d+a.settings.blockWidth/2,f=a.settings.height-a.settings.paddingBottom,c<e&&a.handle.text("column"===a.settings.type?d:h,f+20,a.settings.series[c][0],!1).attr(k).appendTo(m);c=0;for(e=g.yMax;c<=e;c+=Math.ceil(e/4))f=this.getY(b,c),a.handle.text(a.settings.paddingLeft-20,f,c,!1).attr(k).attr({"alignment-baseline":"middle"}).appendTo(l);break;case "bar":c=0;for(e=g.yMax;c<=e;c+=Math.ceil(e/a.settings.blockNum))d=this.getX(b,c),f=a.settings.height-
a.settings.paddingBottom,a.handle.text(d,f+20,c,!1).attr(k).appendTo(m);c=0;d=1;for(e=g.yMax;d<=a.settings.blockNum;d++,c+=Math.ceil(e/a.settings.blockNum))f=this.getY(b,c),a.handle.text(a.settings.paddingLeft-20,parseFloat(f)-a.settings.blockHeight,a.settings.series[d][0],!1).attr(k).attr({"alignment-baseline":"before-edge"}).appendTo(l)}},setAxis:function(b){b=this._getInst(b);if(!b)return!1;var a=[],c=b.handle.g().attr({"class":"zui-chart-axis"}).getShape();a.push([b.settings.paddingLeft,",",b.settings.paddingTop].join(""));
a.push([b.settings.paddingLeft,",",b.settings.paddingTop+b.settings.canvasHeight].join(""));a.push([b.settings.paddingLeft+b.settings.canvasWidth,",",b.settings.paddingTop+b.settings.canvasHeight].join(""));b.handle.polyline(a.join(" "),!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:b.settings.axisColor,"stroke-width":1}).appendTo(c)},scatter:function(b){var a=this._getInst(b);if(!a)return!1;this.setPlot.call(this,b);var c,e,d,f,h,g=this.getBounds(b),k=q.getColors(),l=a.handle.g().attr({"class":"zui-chart-markers"}).getShape();
b=1;for(c=a.settings.series.length;b<c;b++)for(e=1,d=a.settings.series[b].length;e<d;e++)f=a.settings.paddingLeft+a.settings.series[b][0]/g.xMax*a.settings.canvasWidth,h=a.settings.paddingTop+a.settings.canvasHeight-a.settings.series[b][e]/g.yMax*a.settings.canvasHeight,a.handle.circle(f,h,4,!1).attr({fill:k[e-1],"fill-opacity":1,stroke:"none","stroke-width":0}).appendTo(l);n(a.handle.svg).on("mouseover","circle",function(b){b=n(this);a.handle.circle(b.attr("cx"),b.attr("cy"),6,!1).attr({fill:"none",
stroke:b.attr("fill"),"stroke-width":1,"class":"zui-chart-over"}).appendTo(l)}).on("mouseout","circle",function(a){n("circle.zui-chart-over").remove()})},spline:function(b){var a=this._getInst(b);if(!a)return!1;this.setPlot.call(this,b);var c,e,d,f,h,g=[];f=this.getBounds(b);var k=q.getColors(),l=a.handle.g().attr({"class":"zui-chart-canvas"}).getShape(),m=a.handle.g().attr({"class":"zui-chart-points"}).getShape();b=1;for(c=a.settings.series.length;b<c;b++)for(e=1,d=a.settings.series[b].length;e<
d;e++)g[e]===t&&(g[e]=[]),g[e].push(a.settings.paddingTop+a.settings.canvasHeight-a.settings.canvasHeight*(a.settings.series[b][e]/f.yMax));e=1;for(d=g.length;e<d;e++)for(b=0,c=g[e].length;b<c;b++)f=a.settings.paddingLeft+a.settings.blockWidth/2+b*a.settings.blockWidth,b!==c-1&&(h=a.settings.paddingLeft+a.settings.blockWidth/2+(b+1)*a.settings.blockWidth,a.handle.cubicCurve(f+a.settings.blockWidth/2,g[e][b],h-a.settings.blockWidth/2,g[e][b+1],h,g[e][b+1],f,g[e][b],!1).attr({fill:"none",stroke:k[e-
1],"stroke-width":3}).appendTo(l)),a.handle.circle(f,g[e][b],4,!1).attr({fill:"#FFFFFF","fill-opacity":1,stroke:k[e-1],"stroke-opacity":1,"stroke-width":1}).appendTo(m)},_newInst:function(b){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,uid:Math.floor(99999999*Math.random()),isDisabled:!1,settings:{}}},_getInst:function(b){try{return n.data(b,"chart")}catch(a){throw"Missing instance data for this chart";}}};n.fn.zinoChart=function(b){var a=Array.prototype.slice.call(arguments,1);
return"string"==typeof b&&"isDisabled"==b||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?n.zinoChart["_"+b+"Chart"].apply(n.zinoChart,[this[0]].concat(a)):this.each(function(){"string"==typeof b?n.zinoChart["_"+b+"Chart"].apply(n.zinoChart,[this].concat(a)):n.zinoChart._attachChart(this,b)})};n.zinoChart=new q;n.zinoChart.version="1.3"})(jQuery);