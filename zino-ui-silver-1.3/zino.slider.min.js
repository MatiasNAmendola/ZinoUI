/*!
 * ZinoUI v1.3 (http://zinoui.com)
 * Copyright 2012-2013 Dimitar Ivanov. All Rights Reserved.
 *
 * Zino UI commercial licenses may be obtained at http://zinoui.com/license
 * If you do not own a commercial license, this file shall be governed by the
 * GNU General Public License (GPL) version 3.
 * For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
 */
(function(d,p){function q(){this._defaults={range:!1,bounds:[0,100],vertical:!1,height:320,width:320,minValue:0,maxValue:100};this._events={slide:null,start:null,stop:null,enable:null,disable:null};this.keys={backspace:8,tab:9,enter:13,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40}}q.prototype={_attachSlider:function(c,f){if(this._getInst(c))return!1;var l,e,g=d(c),b=this,a=b._newInst(g);d.extend(a.settings,b._defaults,b._events,f);a.settings.offset=100*(8/
a.settings.width);a.settings.range&&(l=d("<a>",{href:"#",role:"slider","aria-valuemax":a.settings.maxValue,"aria-valuemin":a.settings.minValue,"aria-valuenow":a.settings.bounds[0],"aria-valuetext":a.settings.bounds[0],"aria-invalid":"false"}).addClass("zui-slider-handle"));e=d("<a>",{href:"#",role:"slider","aria-valuemax":a.settings.maxValue,"aria-valuemin":a.settings.minValue,"aria-valuenow":a.settings.bounds[1],"aria-valuetext":a.settings.bounds[1],"aria-invalid":"false"}).addClass("zui-slider-handle");
g.addClass("zui-slider");var m=d("<div>").addClass("zui-slider-range");if(a.settings.vertical){g.css({height:a.settings.height+"px"}).addClass("zui-slider-vertical");var h,k=0,n=0;a.settings.range&&(n=Math.ceil(100*(a.settings.bounds[0]/a.settings.maxValue)),l.addClass("zui-slider-up").css({top:n+"%"}),a.data.upY=a.settings.bounds[0],k=1);h=Math.ceil(100*(a.settings.bounds[k]/a.settings.maxValue));e.addClass("zui-slider-down").css({top:h+"%"});a.data.downY=a.settings.bounds[k];m.css({top:n+"%",height:h-
n+"%"})}else g.css({width:a.settings.width+"px"}),n=k=0,a.settings.range&&(n=Math.ceil(100*(a.settings.bounds[0]/a.settings.maxValue)),l.addClass("zui-slider-left").css({left:Math.ceil(100*(a.settings.bounds[0]/a.settings.maxValue)-a.settings.offset)+"%"}),a.data.leftX=a.settings.bounds[0],k=1),h=Math.ceil(100*(a.settings.bounds[k]/a.settings.maxValue)),e.addClass("zui-slider-right").css({left:Math.ceil(100*(a.settings.bounds[k]/a.settings.maxValue)-a.settings.offset)+"%"}),a.data.rightX=a.settings.bounds[k],
m.css({left:n+"%",width:h-n+"%"});m.appendTo(c);d("<div>").addClass("zui-slider-scale").appendTo(c);a.settings.range&&l.appendTo(c);e.appendTo(c);a.settings.vertical?(l=[0,-8],e=[0,a.settings.height-8]):(l=[-8,0],e=[a.settings.width-8,0]);d(".zui-slider-handle",g).zinoDraggable({lowerBound:l,upperBound:e,start:function(c,b){a.data.sliding=!0;var f=b.handle,e=d(f);e.hasClass("zui-slider-left")?(a.data.key="leftX",a.data.opp="rightX"):e.hasClass("zui-slider-right")?(a.data.key="rightX",a.data.opp="leftX"):
e.hasClass("zui-slider-up")?(a.data.key="upY",a.data.opp="downY"):e.hasClass("zui-slider-down")&&(a.data.key="downY",a.data.opp="upY");g.trigger("sliderstart",{});d(f).addClass("zui-slider-handle-active")},drag:function(a,d){b._handlePosition.call(b,a,c,d.handle)},end:function(r,e){b._handleStop.call(b,r,e.handle);a.data.sliding=!1;d(c).trigger("sliderstop",{});d.data(c,"slider",a)},attachLater:!1}).bind("focus.slider",function(a){d(this).addClass("zui-slider-handle-focus")}).bind("blur.slider",function(a){d(this).removeClass("zui-slider-handle-focus")}).bind("keydown.slider",
function(a){}).bind("keypress.slider",function(a){if(a.ctrlKey||a.shiftKey||a.altKey)return!0;switch(a.keyCode){case b.keys.home:case b.keys.pageup:case b.keys.end:case b.keys.pagedown:case b.keys.left:case b.keys.up:case b.keys.right:case b.keys.down:return a.stopPropagation(),!1}return!0});g.on("click.slider",".zui-slider-handle",function(a){a&&a.preventDefault&&a.preventDefault();return!1}).bind("sliderstart",function(b,d){null!==a.settings.start&&a.settings.start.call(c,b,d)}).bind("sliderslide",
function(b,d){null!==a.settings.slide&&a.settings.slide.call(c,b,d)}).bind("sliderstop",function(b,d){null!==a.settings.stop&&a.settings.stop.call(c,b,d)}).bind("sliderenable",function(b,d){null!==a.settings.enable&&a.settings.enable.call(c,b,d)}).bind("sliderdisable",function(b,d){null!==a.settings.disable&&a.settings.disable.call(c,b,d)}).on("click.slider",c,function(a){});d.data(c,"slider",a)},_destroySlider:function(c){if(!this._getInst(c))return!1;d(c).removeClass("zui-slider").find(".zui-slider-range").remove().end().find(".zui-slider-scale").remove().end().find(".zui-slider-handle").remove().end().removeAttr("aria-disabled").removeClass("zui-slider-disabled").off(".slider").undelegate(".slider").unbind(".slider");
d.data(c,"slider",!1)},_enableSlider:function(c){if(!this._getInst(c))return!1;d(c).attr("aria-disabled","false").removeClass("zui-slider-disabled").trigger("sliderenable",{})},_disableSlider:function(c){if(!this._getInst(c))return!1;d(c).attr("aria-disabled","true").addClass("zui-slider-disabled").trigger("sliderdisable",{})},_valueSlider:function(c){var f=this._getInst(c);if(!f)return!1;d.data(c,"slider",f)},_valuesSlider:function(c){var f=this._getInst(c);if(!f)return!1;d.data(c,"slider",f)},_handlePosition:function(c,
f,l){var e,g,b=this._getInst(f);if(!b)return!1;var a,m,h,k=b.data.key;h=b.data.opp;m=d(f);l=d(l);var n=l.siblings(".zui-slider-range");!0===b.data.sliding&&(e=d(c.target).offset().left,g=d(c.target).offset().top,m=m.offset(),h=b.data[h],b.settings.vertical?(a=Math.abs(g-m.top-4),0>a&&(a=0),a>b.settings.height&&(a=b.settings.height),e=100*(a/b.settings.height),a=Math.ceil(100*(a/b.settings.height)),a=Math.ceil(a*b.settings.maxValue/100),e=Math.ceil(e-b.settings.offset),e<0-b.settings.offset&&(e=0-
b.settings.offset),g>=m.top&&(h===p||"upY"===k&&h>=a||"downY"===k&&h<=a)&&(b.data[k]=a,l.css({top:e+"%"}),n.css({top:100*(b.data.upY/b.settings.maxValue)+"%",height:100*(b.data.downY/b.settings.maxValue)-100*(b.data.upY/b.settings.maxValue)+"%"}))):(a=Math.abs(e-m.left-4),0>a&&(a=0),a>b.settings.width&&(a=b.settings.width),g=100*(a/b.settings.width),a=Math.ceil(100*(a/b.settings.width)),a=Math.ceil(a*b.settings.maxValue/100),g=Math.ceil(g-b.settings.offset),g<0-b.settings.offset&&(g=0-b.settings.offset),
e>=m.left&&(h===p||"leftX"===k&&h>=a||"rightX"===k&&h<=a)&&(b.data[k]=a,l.css({left:g+"%"}),n.css({left:100*(b.data.leftX/b.settings.maxValue)+"%",width:100*(b.data.rightX/b.settings.maxValue)-100*(b.data.leftX/b.settings.maxValue)+"%"}))));d(f).trigger("sliderslide",{data:b.data});d.data(f,"slider",b);c&&c.stopPropagation&&c.stopPropagation();return!1},_handleStop:function(c,f){d(f).removeClass("zui-slider-handle-active");d(document).off(".slider");c&&c.stopPropagation&&c.stopPropagation();return!1},
_newInst:function(c){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,uid:Math.floor(99999999*Math.random()),isOpen:!1,isDisabled:!1,settings:{},data:{sliding:!1,key:null,opp:null,leftX:null,rightX:null,upY:null,downY:null}}},_getInst:function(c){try{return d.data(c,"slider")}catch(f){throw"Missing instance data for this slider";}}};d.fn.zinoSlider=function(c){var f=Array.prototype.slice.call(arguments,1);return"string"==typeof c&&"isDisabled"==c||"option"==c&&2==arguments.length&&
"string"==typeof arguments[1]?d.zinoSlider["_"+c+"Slider"].apply(d.zinoSlider,[this[0]].concat(f)):this.each(function(){"string"==typeof c?d.zinoSlider["_"+c+"Slider"].apply(d.zinoSlider,[this].concat(f)):d.zinoSlider._attachSlider(this,c)})};d.zinoSlider=new q;d.zinoSlider.version="1.3"})(jQuery);