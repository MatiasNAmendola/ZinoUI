/*!
 * ZinoUI v1.3 (http://zinoui.com)
 * Copyright 2012-2013 Dimitar Ivanov. All Rights Reserved.
 *
 * Zino UI commercial licenses may be obtained at http://zinoui.com/license
 * If you do not own a commercial license, this file shall be governed by the
 * GNU General Public License (GPL) version 3.
 * For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
 */
(function(a,s){function t(){this._defaults={items:[],disabled:h,select:null,focus:null,blur:null,create:null}}var h=!1;t.prototype={_attachRating:function(b,c){if(this._getInst(b))return h;var d,l,g,m,r,n,k=a(b),p=this,e=p._newInst(k);a.extend(e.settings,p._defaults,c);b.disabled!==s&&!0===b.disabled&&(e.settings.disabled=!0);switch(b.nodeName){case "INPUT":switch(b.type){case "range":k.hide();var f;f=parseFloat(k.attr("min"));var q=parseFloat(k.attr("max"));m=parseFloat(k.attr("value"));n=0;for(d=
a("<span>").addClass("zui-rating");f<=q;f+=1)g=a("<a>",{href:"#",title:f,"data-label":f,"data-value":f}).addClass("zui-rating-star").append("<span></span>"),m!==s&&0===n&&(g.addClass("zui-rating-star-selected"),m===f&&(n=1)),g.appendTo(d);d.insertAfter(k)}break;case "SELECT":k.hide();d=a("<span>").addClass("zui-rating");m=a("option:selected",k).val();n=0;a("option",k).each(function(b,c){l=a(c);r=l.val();g=a("<a>",{href:"#",title:l.text(),"data-label":l.text(),"data-value":r}).addClass("zui-rating-star").append("<span></span>");
""!==m&&0===n&&(g.addClass("zui-rating-star-selected"),m===r&&(n=1));g.appendTo(d)});d.insertAfter(k);break;default:d=k.addClass("zui-rating zui-rating-custom");m=-1;f=n=0;for(q=e.settings.items.length;f<q;f++)if(e.settings.items[f].checked){m=f;break}f=0;for(q=e.settings.items.length;f<q;f++)g=a("<a>",{href:"#",title:e.settings.items[f].label,"data-label":e.settings.items[f].label,"data-value":e.settings.items[f].value}).addClass("zui-rating-star").append("<span></span>"),0<=m&&0===n&&(g.addClass("zui-rating-star-selected"),
m===f&&(n=1)),g.appendTo(d)}d&&(e.settings.disabled&&a(".zui-rating-star",d).addClass("zui-rating-star-disabled"),d.on("click",".zui-rating-star",function(a){a&&a.preventDefault&&a.preventDefault();e.settings.disabled||p._selectRating.call(p,b,this);return h}).on("mouseenter",".zui-rating-star",function(a){e.settings.disabled||p._focusRating.call(p,b,this)}).on("mouseleave",".zui-rating-star",function(a){e.settings.disabled||p._blurRating.call(p,b,this)}),k.bind("ratingcreate",function(a,c){null!==
e.settings.create&&e.settings.create.call(b,a,c)}).bind("ratingselect",function(a,c){null!==e.settings.select&&e.settings.select.call(b,a,c)}).bind("ratingfocus",function(a,c){null!==e.settings.focus&&e.settings.focus.call(b,a,c)}).bind("ratingblur",function(a,c){null!==e.settings.blur&&e.settings.blur.call(b,a,c)}),e.holder=d.get(0));a(b).trigger("ratingcreate",{});a.data(b,"rating",e)},_focusRating:function(b,c){var d=this._getInst(b);if(!d)return h;var l=a(c),g=a(".zui-rating-star",d.holder).index(c);
a(".zui-rating-star",d.holder).filter(":gt("+g+")").removeClass("zui-rating-star-focus").end().filter(":lt("+(g+1)+")").addClass("zui-rating-star-focus");a(b).trigger("ratingfocus",{input:c,index:g,value:l.data("value"),label:l.data("label")})},_blurRating:function(b){var c=this._getInst(b);if(!c)return h;a(".zui-rating-star",c.holder).removeClass("zui-rating-star-focus");a(b).trigger("ratingblur",{})},_selectRating:function(b,c){var d=this._getInst(b);if(!d)return h;var l=a(c),g=a(".zui-rating-star",
d.holder).index(c);a(".zui-rating-star",d.holder).removeClass("zui-rating-star-focus zui-rating-star-selected").filter(":lt("+(g+1)+")").addClass("zui-rating-star-selected");a(b).trigger("ratingselect",{input:c,index:g,value:l.data("value"),label:l.data("label")})},_enableRating:function(b){var c=this._getInst(b);if(!c)return h;a(".zui-rating-star",c.holder).removeClass("zui-rating-star-disabled");c.settings.disabled=h;a.data(b,"rating",c)},_disableRating:function(b){var c=this._getInst(b);if(!c)return h;
a(".zui-rating-star",c.holder).addClass("zui-rating-star-disabled");c.settings.disabled=!0;a.data(b,"rating",c)},_destroyRating:function(b){var c=this._getInst(b),d=a(b);if(!c)return h;c=a(c.holder);c.hasClass("zui-rating-custom")?(c.removeClass("zui-rating zui-rating-custom"),a("zui-rating-star",c).remove()):c.remove();d.is(":visible")||d.show();a.data(b,"rating",h)},_newInst:function(a){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,uid:Math.floor(99999999*Math.random()),isDisabled:h,
settings:{}}},_getInst:function(b){try{return a.data(b,"rating")}catch(c){throw"Missing instance data for this rating";}}};a.fn.zinoRating=function(b){var c=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&"isDisabled"==b||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?a.zinoRating["_"+b+"Rating"].apply(a.zinoRating,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.zinoRating["_"+b+"Rating"].apply(a.zinoRating,[this].concat(c)):a.zinoRating._attachRating(this,
b)})};a.zinoRating=new t;a.zinoRating.version="1.3"})(jQuery);