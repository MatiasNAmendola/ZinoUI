/*!
 * ZinoUI v1.3 (http://zinoui.com)
 * Copyright 2012-2013 Dimitar Ivanov. All Rights Reserved.
 *
 * Zino UI commercial licenses may be obtained at http://zinoui.com/license
 * If you do not own a commercial license, this file shall be governed by the
 * GNU General Public License (GPL) version 3.
 * For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
 */
(function(g,l){function q(){this._defaults={expand:null,collapse:null,resize:null,load:null,dataUrl:null,splitterSize:4,orientation:"horizontal",panes:[]}}q.prototype={_attachSplitter:function(e,b){if(this._getInst(e))return!1;var h=g(e),k=this,a=k._newInst(h);g.extend(a.settings,k._defaults,b);h.addClass("zui-splitter").bind("splitterexpand",function(b,d){null!==a.settings.expand&&a.settings.expand.call(e,b,d)}).bind("splittercollapse",function(b,d){null!==a.settings.collapse&&a.settings.collapse.call(e,
b,d)}).bind("splitterresize",function(b,d){null!==a.settings.resize&&a.settings.resize.call(e,b,d)}).bind("splitterload",function(b,d){null!==a.settings.load&&a.settings.load.call(e,b,d)});var d,c,f,r,t,q,u,n,s="horizontal"===a.settings.orientation,m={},p=0;f=0;for(r=a.settings.panes.length;f<r;f++)n={position:"absolute"},d=h.children().not(".zui-splitter-separator").eq(f),a.settings.panes[f].dataUrl!==l&&g.get(a.settings.panes[f].dataUrl).done(function(a){return function(b){h.children().not(".zui-splitter-separator").eq(a).html(b);
h.trigger("splitterload",{})}}(f)),d.addClass("zui-splitter-pane").data("size",a.settings.panes[f].size),s?(d.addClass("zui-splitter-pane-horizontal"),c=0,t=p+"px",q=a.settings.panes[f].size+"px",n.bottom=0,m.top=0,m.bottom=0,m.left=a.settings.panes[f].size+p+"px",m.right="auto",m.width=a.settings.splitterSize+"px"):(d.addClass("zui-splitter-pane-vertical"),c=p+"px",t=0,u=a.settings.panes[f].size+"px",n.right=0,m.left=0,m.right=0,m.top=a.settings.panes[f].size+p+"px",m.bottom="auto",m.height=a.settings.splitterSize+
"px"),n.top=c,n.left=t,n.width=q,n.height=u,d.css(n),c=g("<div>",{role:"separator"}).addClass("zui-splitter-separator"),a.settings.panes[f].region!==l?(c.data("region",a.settings.panes[f].region),d.data("region",a.settings.panes[f].region)):s?(c.data("region","west"),d.data("region","west")):(c.data("region","north"),d.data("region","north")),a.settings.panes[f].resizable!==l&&!0!==a.settings.panes[f].resizable||c.attr("data-draggable","true").addClass("zui-splitter-separator-draggable"),s?(a.settings.panes[f].region!==
l&&"east"===a.settings.panes[f].region?(c.insertBefore(d),d=c.prev(),d.hasClass("zui-splitter-separator")&&d.remove(),m.left=p-a.settings.splitterSize+"px"):c.insertAfter(d),c.addClass("zui-splitter-separator-horizontal")):"vertical"===a.settings.orientation&&(a.settings.panes[f].region!==l&&"south"===a.settings.panes[f].region?(c.insertBefore(d),d=c.prev(),d.hasClass("zui-splitter-separator")&&d.remove(),m.top=p-a.settings.splitterSize+"px"):c.insertAfter(d),c.addClass("zui-splitter-separator-vertical")),
c.css(m),p+=a.settings.panes[f].size+a.settings.splitterSize,a.settings.panes[f].collapsible!==l&&!0===a.settings.panes[f].collapsible&&(d=g("<a>").addClass("zui-splitter-collapsible").appendTo(c),s?d.addClass("zui-splitter-collapsible-horizontal"):"vertical"===a.settings.orientation&&d.addClass("zui-splitter-collapsible-vertical"));h.children().children(".zui-splitter-collapsible").bind("click.splitter",function(a){a.stopPropagation();var b=g(this).parent(),b="north"===b.data("region")||"west"===
b.data("region")?b.prev():b.next();b.is(":visible")?k._collapseSplitter.call(k,e,b):k._expandSplitter.call(k,e,b);a&&a.preventDefault&&a.preventDefault();return!1});"horizontal"===a.settings.orientation?(r=[0,0],f=[h.width()-a.settings.splitterSize,0]):(r=[0,h.height()-a.settings.splitterSize],f=[0,0]);if(g.fn.zinoDraggable!==l)h.find(".zui-splitter-separator-draggable").zinoDraggable({lowerBound:f,upperBound:r,start:function(a,b){},drag:function(a,b){},end:function(b,d){var c,e=g(this),f=e.prev(),
k=e.next(),m=k.next(),l=e.position();"horizontal"===a.settings.orientation?(c=l.left-f.position().left,f.css({width:c+"px"}).data("size",c),c=0===m.length?e.parent().width()-l.left-a.settings.splitterSize:m.position().left-l.left-a.settings.splitterSize,k.css({width:c+"px",left:l.left+a.settings.splitterSize+"px"}).data("size",c)):(c=l.top-f.position().top,f.css({height:c+"px"}).data("size",c),c=0===m.length?e.parent().height()-l.top-a.settings.splitterSize:m.position().top-l.top-a.settings.splitterSize,
k.css({height:c+"px",top:l.top+a.settings.splitterSize+"px"}).data("size",c));h.trigger("splitterresize",{})}});else throw Error("zinoDraggable is missing.");g.data(e,"splitter",a)},_collapseSplitter:function(e,b){var h=this._getInst(e);if(!h||0===b.length)return!1;b.attr("aria-expanded",!1);var k=b.position(),a="east"===b.data("region")||"south"===b.data("region"),d=a?b.prev(".zui-splitter-separator"):b.next(".zui-splitter-separator"),c=a?d.prev(".zui-splitter-pane"):d.next(".zui-splitter-pane");
b.hasClass("zui-splitter-pane-horizontal")?(d.css({left:(a?k.left+b.outerWidth()-h.settings.splitterSize:k.left)+"px"}),c.css({left:(a?c.position().left:k.left+h.settings.splitterSize)+"px",width:c.outerWidth()+b.outerWidth()+"px"})):b.hasClass("zui-splitter-pane-vertical")&&(d.css({top:(a?k.top+b.outerHeight()-h.settings.splitterSize:k.top)+"px"}),c.css({top:(a?c.position().top:k.top+h.settings.splitterSize)+"px",height:c.outerHeight()+b.outerHeight()+"px"}));b.hide();d.data("draggable")&&g.fn.zinoDraggable!==
l&&d.zinoDraggable("disable");d.addClass("zui-splitter-separator-collapsed");g(e).trigger("splittercollapse",{item:b})},_expandSplitter:function(e,b){var h=this._getInst(e);if(!h||0===b.length)return!1;b.attr("aria-expanded",!0);b.show();var k=b.position(),a="east"===b.data("region")||"south"===b.data("region"),d=a?b.prev(".zui-splitter-separator"):b.next(".zui-splitter-separator"),c=a?d.prev(".zui-splitter-pane"):d.next(".zui-splitter-pane");b.hasClass("zui-splitter-pane-horizontal")?(b.css({width:b.data("size")+
"px"}),d.css({left:(a?k.left-h.settings.splitterSize:k.left+parseInt(b.outerWidth(),10))+"px"}),c.css({left:(a?c.position().left:c.position().left+b.outerWidth())+"px",width:c.outerWidth()-b.outerWidth()+"px"})):b.hasClass("zui-splitter-pane-vertical")&&(b.css({height:b.data("size")+"px"}),d.css({top:(a?k.top-h.settings.splitterSize:k.top+parseInt(b.outerHeight(),10))+"px"}),c.css({top:(a?c.position().top:c.position().top+b.outerHeight())+"px",height:c.outerHeight()-b.outerHeight()+"px"}));d.data("draggable")&&
g.fn.zinoDraggable!==l&&d.zinoDraggable("enable");d.removeClass("zui-splitter-separator-collapsed");g(e).trigger("splitterexpand",{item:b})},_destroySplitter:function(e){var b=this._getInst(e),h=g(e);if(!b)return!1;h.removeClass("zui-splitter").children(".zui-splitter-separator").remove().end().children().removeAttr("aria-expanded").removeClass("zui-splitter-pane zui-splitter-pane-horizontal zui-splitter-pane-vertical").css({left:"initial",right:"initial",top:"initial",bottom:"initial",position:"initial",
width:"initial",height:"initial"});g.data(e,"splitter",!1)},_newInst:function(e){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,uid:Math.floor(99999999*Math.random()),focus:!1,isOpen:!1,isDisabled:!1,settings:{}}},_getInst:function(e){try{return g.data(e,"splitter")}catch(b){throw"Missing instance data for this splitter";}}};g.fn.zinoSplitter=function(e){var b=Array.prototype.slice.call(arguments,1);return"string"===typeof e&&"isDisabled"===e||"option"===e&&2===arguments.length&&
"string"===typeof arguments[1]?g.zinoSplitter["_"+e+"Splitter"].apply(g.zinoSplitter,[this[0]].concat(b)):this.each(function(){"string"===typeof e?g.zinoSplitter["_"+e+"Splitter"].apply(g.zinoSplitter,[this].concat(b)):g.zinoSplitter._attachSplitter(this,e)})};g.zinoSplitter=new q;g.zinoSplitter.version="1.3"})(jQuery);